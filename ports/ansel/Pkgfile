# Description: photography workflow application
# Depends on: gtk3 sqlite3 pango librsvg libxml2 libpng libjpeg-turbo libtiff lcms2 json-glib exiv2 pugixml curl glib isl
# Optional: llvm clang libsoup gphoto2 openexr lensfun icu lua cups xorg libwebp openjpeg2 iso-codes libsecret graphicsmagick libavif

name=ansel
version=git
release=mix-1
source=()

build() {
  git clone --recurse-submodules --depth 1 https://github.com/aurelienpierreeng/$name.git

  # archlinux patch for darktable
  patch -Np1 -d $name -i $PKGMK_ROOT/exiv2-0.28.patch

  cmake -B build -S $name \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=/usr/lib \
    -DCMAKE_BUILD_TYPE=Release \
    -DUSE_NLS=false
  cmake --build build
  DESTDIR=$PKG cmake --install build
  ln -sv ansel/libansel.so $PKG/usr/lib/libansel.so

  rm -rv $PKG/usr/share/doc
}
