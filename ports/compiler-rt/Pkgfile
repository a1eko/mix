# Description: Compiler runtime libraries for clang
# Depends on:  cmake ninja llvm

name=compiler-rt
version=9.0.0
release=mix-1
source=(http://releases.llvm.org/$version/$name-$version.src.tar.xz)


build() {
  cd $name-$version.src

  mkdir build
  cd build

  cmake .. -G Ninja \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr

  ninja
  DESTDIR=$PKG ninja install

  mkdir -pv $PKG/usr/lib/clang/$version/{lib,share}
  mv -v $PKG/usr/lib/{linux,clang/$version/lib/}
  mv -v $PKG/usr/{share/*.txt,lib/clang/$version/share/}
}
