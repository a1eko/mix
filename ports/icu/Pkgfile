# Description: Widely used set of C/C++ libraries providing Unicode and Globalization support.
# URL: http://www.icu-project.org/
# Maintainer: Danny Rawlins, crux at romster dot me
# Packager: Younes Hafri, ycrux at club-internet dot fr

name=icu
version=58.2
release=mix-1
source=(http://download.icu-project.org/files/icu4c/$version/icu4c-${version//./_}-src.tgz
	icu-58.1-remove-bashisms.patch
	icu-58.1-iterator.patch)

build() {
	cd icu/source
        sed -i 's/xlocale/locale/' i18n/digitlst.cpp

	patch -p1 -i $SRC/icu-58.1-remove-bashisms.patch
	patch -p1 -i $SRC/icu-58.1-iterator.patch

	# icu tries to use clang by default
	[ "$CC" ] || export CC=gcc
	[ "$CXX" ] || export CXX=g++

	./configure \
		--prefix=/usr \
		--disable-samples \
		--disable-tests

	make
	make DESTDIR=$PKG install
}
