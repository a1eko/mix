# Description: Neuron simulation environment
# Depends on: iv python3 git
# Nice to have: mpich

name=nrn
version=git
release=mix-1
source=()
 
build() {
  git clone https://github.com/nrnhines/nrn
  cd $name
  ./build.sh
  if which mpirun &>/dev/null; then WITH_MPI=--with-mpi; fi
  ./configure --prefix=/usr --exec-prefix=/usr --with-iv=/usr \
    --with-pyexe=python3 --with-nrnpython --with-paranrn $WITH_MPI
  make
  make DESTDIR=$PKG install
  rm -rv $PKG/usr/share/nrn/{demo,examples}
}
